/* Match Gameweek page: fill height, flex column, same gap so sticky toolbar behaves identically */
.mini-league-page {
  height: 100%;
  min-height: 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 0;
  max-width: 1400px;
  margin: 0 auto;
  color: var(--text-primary);
}

/* Staggered row entrance: standings and captains table rows */
@keyframes league-row-in {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.mini-league-page .league-standings-bento-table tbody tr.league-standings-row-animate {
  animation: league-row-in var(--motion-duration) var(--motion-ease) both;
}
.mini-league-page .league-transfers-table tbody tr.league-transfers-row-animate {
  animation: league-row-in var(--motion-duration) var(--motion-ease) both;
}

/* Sticky strip: search bar (Standings only) + subpage tabs; content below scrolls underneath. */
.mini-league-page .subpage-toolbar-wrap {
  position: sticky;
  top: 0;
  z-index: 10;
  margin-top: 8px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  background: var(--bg-primary);
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

.league-sticky-search-row {
  flex-shrink: 0;
  min-width: 0;
  width: 100%;
}

/* Stretch search bar and results to match subpage selector and table width */
.league-sticky-search-row .league-ownership-search-container {
  margin-bottom: 0;
  flex: 1 1 auto;
  min-width: 0;
  width: 100%;
  max-width: none;
}

/* Subpage selector: match Research/Gameweek height, don’t let it squish in column layout */
.mini-league-page .subpage-toolbar-wrap .subpage-view-toggle {
  flex-shrink: 0;
  min-height: 40px;
  height: 40px;
}

/* Content below sticky strip: stretch to same width as toolbar (match Dashboard toolbar bleed) */
.mini-league-page .league-standings-bento.league-standings-page {
  margin-top: 0; /* gap: 8px on .mini-league-page provides spacing; match Gameweek */
  width: calc(100% + 32px);
  margin-left: -16px;
  margin-right: -16px;
  padding-left: 16px;
  padding-right: 16px;
  box-sizing: border-box;
  flex: 1 1 auto;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

/* Desktop: hide in-page subpage tabs (use header dropdown); show sticky strip only on Standings for search bar */
@media (min-width: 769px) {
  .mini-league-page:not(.league-page--standings-view) .subpage-toolbar-wrap {
    display: none;
  }

  .mini-league-page .subpage-toolbar-wrap .subpage-view-toggle {
    display: none;
  }
}

/* League uses shared .subpage-view-toggle from Dashboard.css (same as Research/Gameweek); no league-specific overrides. */

@media (hover: hover) {
  .league-view-toggle-button.active:hover {
    color: #fff;
    background: transparent;
  }
}

.league-view-toggle-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.league-view-toggle-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Captain "C": filled rounded square; default = dark fill + white C, active = white fill + dark C */
.league-view-toggle-icon-text {
  font-size: 11px;
  font-weight: 700;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 1.1em;
  min-height: 1.1em;
  padding: 0 2px;
  border-radius: 4px;
  box-sizing: border-box;
  background: var(--text-secondary);
  color: #fff;
}

.league-view-toggle-button.active .league-view-toggle-icon-text {
  background: #fff;
  color: var(--accent-blue, #3b82f6);
}

/* Desktop only: league view as dropdown (like Gameweek / Research nav) */
.league-view-dropdown-wrap {
  display: none;
}

@media (min-width: 769px) {
  .league-view-dropdown-wrap {
    display: block;
    position: relative;
    flex: 0 1 auto;
    min-width: 0;
  }

  .league-view-dropdown-trigger {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    width: 100%;
    min-width: 140px;
    height: 40px;
    padding: 0 12px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: border-color 0.2s ease, background 0.2s ease;
    -webkit-tap-highlight-color: transparent;
  }

  .league-view-dropdown-trigger:hover {
    background: var(--bg-card);
    border-color: var(--border-hover, rgba(0, 0, 0, 0.12));
  }

  .league-view-dropdown-label {
    flex: 1;
    min-width: 0;
    text-align: left;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .league-view-dropdown-chevron {
    flex-shrink: 0;
    opacity: 0.85;
    transition: transform 0.2s ease;
    color: inherit;
  }

  .league-view-dropdown-chevron--open {
    transform: rotate(180deg);
  }

  .league-view-dropdown-panel {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    margin-top: 6px;
    padding: 4px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    z-index: 50;
    min-width: 100%;
  }

  .league-view-dropdown-option {
    display: block;
    width: 100%;
    padding: 8px 12px;
    border: none;
    border-radius: 4px;
    background: transparent;
    color: var(--text-secondary);
    font-size: 13px;
    font-weight: 500;
    text-align: left;
    cursor: pointer;
    transition: background 0.15s, color 0.15s;
  }

  .league-view-dropdown-option:hover {
    color: var(--text-primary);
    background: var(--bg-secondary);
  }

  .league-view-dropdown-option--active {
    color: var(--accent-blue);
    font-weight: 600;
  }
}

/* League Transfers summary – uses gw-top-points-card (MatchesSubpage) format/sizing; OUT/IN columns keep colors */
.league-page-transfers-summary {
  margin-bottom: 8px;
  width: 100%;
  min-width: 0;
}

.league-transfers-summary-chip-row {
  flex-shrink: 0;
  margin-bottom: 2px;
}

/* OUT/IN columns inside expanded card: compact typography, keep left/right colors from BentoCard */
.league-page-transfers-summary .gw-top-points-content .transfers-summary-columns-wrapper {
  max-height: min(40vh, 200px);
  overflow-y: auto;
}

.league-page-transfers-summary .gw-top-points-content .transfers-summary-column-list {
  gap: 5px;
}

.league-page-transfers-summary .gw-top-points-content .transfers-summary-column-item {
  font-size: 10px;
  padding: 3px 6px;
  min-height: 22px;
  gap: 4px;
}

.league-page-transfers-summary .gw-top-points-content .transfers-summary-column-name {
  font-size: 10px;
  line-height: 12px;
  min-height: 18px;
}

.league-page-transfers-summary .gw-top-points-content .transfers-summary-column-count {
  font-size: 10px;
  line-height: 12px;
}

.league-page-transfers-summary .gw-top-points-content .transfers-summary-badge-slot,
.league-page-transfers-summary .gw-top-points-content .transfers-summary-badge {
  width: 16px;
  height: 16px;
}

.league-page-transfers-summary .gw-top-points-content .transfers-summary-badge-placeholder {
  width: 16px;
  height: 16px;
}

.league-page-transfers-summary .gw-top-points-content .transfers-summary-column-header {
  margin-bottom: 4px;
  position: sticky;
  top: 0;
  z-index: 1;
  background: var(--bg-card);
  padding-bottom: 2px;
}

.league-page-transfers-summary .gw-top-points-content .transfers-summary-column-title {
  font-size: 9px;
}

/* League ownership search: bar above table */
.league-standings-toolbar .league-ownership-search-container {
  margin-bottom: 0;
  flex: 1 1 auto;
  min-width: 0;
}

.league-ownership-search-container {
  position: relative;
  margin-bottom: 6px;
  width: 100%;
  max-width: 200px;
}

@media (min-width: 769px) {
  .league-ownership-search-container {
    max-width: 320px;
  }
}

.league-ownership-search-bar {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 0 10px;
  background: var(--bg-card, #fff);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 6px;
  height: 40px;
  min-height: 40px;
  box-sizing: border-box;
  position: relative;
}

.league-ownership-search-icon {
  flex-shrink: 0;
  color: var(--text-secondary);
}

.league-ownership-search-input {
  flex: 1;
  min-width: 0;
  border: none;
  background: none;
  font: inherit;
  font-size: 11px;
  color: var(--text-primary);
  outline: none;
}

.league-ownership-search-input::placeholder {
  color: var(--text-secondary);
}

.league-ownership-search-bar--has-value .league-ownership-search-input {
  padding-right: 4px;
}

.league-ownership-search-clear {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  padding: 0;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: var(--text-secondary);
  opacity: 0.7;
  cursor: pointer;
  transition: opacity 0.15s ease, color 0.15s ease;
}

.league-ownership-search-clear:hover {
  opacity: 1;
  color: var(--text-primary);
}

.league-ownership-search-clear:focus-visible {
  outline: 2px solid var(--focus-ring, #3b82f6);
  outline-offset: 1px;
}

@media (max-width: 768px) {
  .league-ownership-search-input {
    font-size: 11px;
  }
}

.league-ownership-selected-container {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 6px;
  margin-top: 8px;
}

.league-ownership-selected-chip {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 4px 6px 4px 8px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 12px;
}

.league-ownership-selected-chip .league-ownership-player-name {
  flex: 0 1 auto;
}

.league-ownership-clear-all {
  margin-left: 2px;
  padding: 2px 6px;
  font-size: 11px;
  color: var(--text-secondary);
  background: none;
  border: none;
  cursor: pointer;
  border-radius: 4px;
  -webkit-tap-highlight-color: transparent;
}

@media (hover: hover) {
  .league-ownership-clear-all:hover {
    color: var(--text-primary);
    background: var(--bg-secondary);
  }
}

.league-ownership-player-badge {
  flex-shrink: 0;
  width: 20px;
  height: 20px;
  object-fit: contain;
}

.league-ownership-player-name {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-primary);
}

.league-ownership-clear {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 2px;
  border: none;
  background: none;
  color: var(--text-secondary);
  cursor: pointer;
  border-radius: 4px;
  -webkit-tap-highlight-color: transparent;
}

@media (hover: hover) {
  .league-ownership-clear:hover {
    color: var(--text-primary);
    background: var(--bg-secondary);
  }
}

.league-ownership-autocomplete {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  margin: 3px 0 0;
  padding: 2px 0;
  list-style: none;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 5px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  max-height: 200px;
  overflow-y: auto;
  z-index: 10;
}

.league-ownership-autocomplete-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 10px;
  font-size: 12px;
  color: var(--text-primary);
  cursor: pointer;
  transition: background 0.15s;
  border-bottom: 1px solid var(--border-color);
}

.league-ownership-autocomplete-item:last-child {
  border-bottom: none;
}

.league-ownership-autocomplete-item:focus {
  background: var(--bg-secondary);
  outline: none;
}
@media (hover: hover) {
  .league-ownership-autocomplete-item:hover {
    background: var(--bg-secondary);
    outline: none;
  }
}

.league-ownership-autocomplete-item.league-ownership-autocomplete-loading,
.league-ownership-autocomplete-item.league-ownership-autocomplete-empty {
  color: var(--text-secondary);
  cursor: default;
}

.league-ownership-autocomplete-position {
  margin-left: auto;
  flex-shrink: 0;
  font-size: 10px;
  font-weight: 600;
  padding: 2px 5px;
  border-radius: 3px;
  background: var(--bg-secondary);
  color: var(--text-secondary);
}

.league-ownership-filter-hint {
  margin: 4px 0 0;
  font-size: 10px;
  color: var(--text-secondary);
  line-height: 1.4;
}

.league-ownership-filter-hint strong {
  color: var(--text-primary);
  font-weight: 600;
}

.league-ownership-filter-hint strong.league-ownership-filter-hint-count {
  color: var(--accent-blue, #3b82f6);
  font-weight: 800;
}

@media (max-width: 768px) {
  .league-ownership-search-container {
    max-width: none;
    width: 100%;
  }
}

.standings-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.standings-header h2 {
  margin: 0;
  color: var(--text-primary);
  font-size: 24px;
  font-weight: 600;
}

.refresh-button {
  padding: 8px 16px;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

@media (hover: hover) {
  .refresh-button:hover:not(:disabled) {
    background: var(--bg-secondary);
    border-color: var(--text-secondary);
  }
}

.refresh-button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.standings-table {
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  overflow: hidden;
}

.standings-table table {
  width: 100%;
  border-collapse: collapse;
}

.standings-table thead {
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-color);
}

.standings-table th {
  padding: 12px 16px;
  text-align: left;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.standings-table td {
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-color);
  color: var(--text-primary);
}

.standings-table tbody tr:last-child td {
  border-bottom: none;
}

@media (hover: hover) {
  .standings-table tbody tr:hover {
    background: var(--bg-hover);
  }
}

.standings-table .positive {
  color: #10b981;
  font-weight: 600;
}

.standings-table .negative {
  color: #ef4444;
  font-weight: 600;
}

.loading-state,
.error-state,
.empty-state {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 400px;
  color: var(--text-secondary);
}

.error-state {
  color: #ef4444;
}

/* League page table: fill container; allow horizontal scroll when table is wider than viewport */
.league-standings-page .league-standings-bento-table-wrapper {
  max-height: none;
  overflow-x: auto;
  overflow-y: visible;
  width: 100%;
  background: var(--bg-primary); /* match row bg so no fill strip shows in manager column */
  transition: opacity 0.2s ease;
  /* Prevent sticky header/column being pulled off on mobile drag */
  overscroll-behavior: none;
  /* Space after last row so bottom border is visible when scrolled (standings, captain, chips, transfers) */
  padding-bottom: 10px;
}

/* Desktop: show scrollbars on league table (Standings, Captains, Transfers, Chips) */
@media (hover: hover) and (min-width: 769px) {
  .mini-league-page .league-standings-page .league-standings-bento-table-wrapper {
    scrollbar-width: thin;
    scrollbar-color: color-mix(in srgb, var(--border-color) 70%, transparent) transparent;
  }
  .mini-league-page .league-standings-page .league-standings-bento-table-wrapper::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  .mini-league-page .league-standings-page .league-standings-bento-table-wrapper::-webkit-scrollbar-track {
    background: transparent;
  }
  .mini-league-page .league-standings-page .league-standings-bento-table-wrapper::-webkit-scrollbar-thumb {
    background: color-mix(in srgb, var(--border-color) 70%, transparent);
    border-radius: 4px;
  }
  .mini-league-page .league-standings-page .league-standings-bento-table-wrapper::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
  }
}

/* Desktop: bento body and table wrapper size to content for all views so bottom aligns with last row (Standings, Captains, Transfers, Chips) */
@media (min-width: 769px) {
  .mini-league-page .league-standings-bento.league-standings-page {
    flex: 0 1 auto;
  }

  .mini-league-page .league-standings-bento.league-standings-page .league-standings-bento-body {
    flex: 0 1 auto;
    min-height: 0;
    display: flex;
    flex-direction: column;
    overflow: visible;
  }

  .mini-league-page .league-standings-bento-table-wrapper {
    flex: 0 0 auto;
    min-height: 0;
    overflow-x: auto;
    overflow-y: visible;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: auto;
  }

  .mini-league-page .league-standings-bento-table-wrapper .league-transfers-table-wrap {
    overflow: visible;
  }
}

/* Desktop: header in normal flow above first data row (like a data table); no sticky to avoid misalignment */
@media (min-width: 769px) {
  .mini-league-page .league-standings-bento-table-wrapper .league-standings-bento-table thead,
  .mini-league-page .league-standings-bento-table-wrapper .league-transfers-table thead {
    display: table-header-group;
    position: static;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
  }
  .mini-league-page .league-standings-bento-table-wrapper .league-standings-bento-table thead th,
  .mini-league-page .league-standings-bento-table-wrapper .league-transfers-table thead th {
    background: var(--bg-secondary);
  }
}

/* Mobile: content-sized when table is short (no gap below table); scroll inside bento when table is long */
@media (max-width: 768px) {
  .mini-league-page {
    padding-bottom: 0;
  }

  .mini-league-page .league-standings-transfers-spacer {
    display: none;
  }

  /* Bento: size to content when short, cap and scroll when long — avoids big gap below table */
  .mini-league-page .league-standings-bento.league-standings-page {
    flex: 0 1 auto;
    min-height: 0;
    max-height: 100%;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Bento body: content-sized so bento height follows table height when short */
  .mini-league-page .league-standings-bento.league-standings-page .league-standings-bento-body {
    flex: 0 1 auto;
    min-height: 0;
    display: flex;
    flex-direction: column;
    overflow: visible;
  }

  /* Table wrapper: content-sized; when content is long, bento scrolls (bento has max-height: 100%) */
  .mini-league-page .league-standings-bento-table-wrapper {
    flex: 0 0 auto;
    min-height: 0;
    overflow-x: auto;
    overflow-y: visible;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: auto;
  }

  .mini-league-page .league-standings-bento-table-wrapper .league-transfers-table-wrap {
    overflow: visible;
  }

  /* Sticky thead sticks to top of the table wrapper when bento scrolls */
  .mini-league-page .league-standings-bento-table-wrapper .league-standings-bento-table thead,
  .mini-league-page .league-standings-bento-table-wrapper .league-transfers-table thead {
    position: sticky;
    top: 0;
    z-index: 2;
    background: var(--bg-secondary);
    box-shadow: 0 1px 0 var(--border-color);
  }

  .mini-league-page .league-standings-bento-table-wrapper .league-standings-bento-table thead th,
  .mini-league-page .league-standings-bento-table-wrapper .league-transfers-table thead th {
    background: var(--bg-secondary);
  }
}

/* Desktop: show scrollbars when league bento scrolls (e.g. long table on smaller viewport) */
@media (hover: hover) and (min-width: 769px) {
  .mini-league-page .league-standings-bento.league-standings-page {
    scrollbar-width: thin;
    scrollbar-color: color-mix(in srgb, var(--border-color) 70%, transparent) transparent;
  }
  .mini-league-page .league-standings-bento.league-standings-page::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  .mini-league-page .league-standings-bento.league-standings-page::-webkit-scrollbar-track {
    background: transparent;
  }
  .mini-league-page .league-standings-bento.league-standings-page::-webkit-scrollbar-thumb {
    background: color-mix(in srgb, var(--border-color) 70%, transparent);
    border-radius: 4px;
  }
  .mini-league-page .league-standings-bento.league-standings-page::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
  }
  .manager-detail-modal-body {
    scrollbar-width: thin;
    scrollbar-color: color-mix(in srgb, var(--border-color) 70%, transparent) transparent;
  }
  .manager-detail-modal-body::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  .manager-detail-modal-body::-webkit-scrollbar-track {
    background: transparent;
  }
  .manager-detail-modal-body::-webkit-scrollbar-thumb {
    background: color-mix(in srgb, var(--border-color) 70%, transparent);
    border-radius: 4px;
  }
  .manager-detail-modal-body::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
  }
  .league-page-transfers-summary .gw-top-points-content .transfers-summary-columns-wrapper {
    scrollbar-width: thin;
    scrollbar-color: color-mix(in srgb, var(--border-color) 70%, transparent) transparent;
  }
  .league-page-transfers-summary .gw-top-points-content .transfers-summary-columns-wrapper::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  .league-page-transfers-summary .gw-top-points-content .transfers-summary-columns-wrapper::-webkit-scrollbar-track {
    background: transparent;
  }
  .league-page-transfers-summary .gw-top-points-content .transfers-summary-columns-wrapper::-webkit-scrollbar-thumb {
    background: color-mix(in srgb, var(--border-color) 70%, transparent);
    border-radius: 4px;
  }
  .league-page-transfers-summary .gw-top-points-content .transfers-summary-columns-wrapper::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
  }
}

.league-standings-page .league-standings-bento-table-wrapper--dimmed {
  opacity: 0.65;
}

/* C view: standings table with Captain + Vice columns — fixed layout, squeeze into width */
.league-standings-c-view-wrap .league-standings-c-view-table {
  table-layout: fixed;
  width: 100%;
}

/* Match standings view row height: same tr/td height and padding as default table */
.league-standings-page .league-standings-c-view-table tbody tr {
  min-height: 36px;
}
.league-standings-page .league-standings-c-view-table tbody td {
  min-height: 36px;
  height: 36px;
  padding: 6px 8px;
  box-sizing: border-box;
  vertical-align: middle;
}

.league-standings-c-view-table .league-standings-c-view-th-captain,
.league-standings-c-view-table .league-standings-c-view-th-vice {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-weight: 600;
  font-size: inherit;
  text-transform: none;
  letter-spacing: 0;
}

.league-standings-c-view-table .league-standings-c-view-td-captain,
.league-standings-c-view-table .league-standings-c-view-td-vice {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  vertical-align: middle;
}

.league-standings-c-view-table .captain-standings-bento-player-cell {
  min-width: 0;
}

.league-standings-c-view-table .captain-standings-bento-player-name {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Captains subpage: slight indent for manager header and names (specificity overrides .league-standings-page .league-standings-bento-table th/td padding) */
.league-standings-page .league-standings-bento-table.league-standings-c-view-table th.league-standings-bento-team {
  padding-left: 12px;
}
.league-standings-page .league-standings-bento-table.league-standings-c-view-table td.league-standings-c-view-manager-cell {
  padding-left: 12px;
}
/* Captain and Vice columns: indent header and value cells off left edge */
.league-standings-page .league-standings-bento-table.league-standings-c-view-table th.league-standings-c-view-th-captain,
.league-standings-page .league-standings-bento-table.league-standings-c-view-table th.league-standings-c-view-th-vice {
  padding-left: 14px;
}
.league-standings-page .league-standings-bento-table.league-standings-c-view-table tbody td.league-standings-c-view-td-captain,
.league-standings-page .league-standings-bento-table.league-standings-c-view-table tbody td.league-standings-c-view-td-vice {
  padding-left: 14px;
}

/* C view: manager cell — chip badge next to name (not pushed right) */
.league-standings-c-view-table .league-standings-c-view-manager-cell {
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 0;
  overflow: hidden;
}

.league-standings-c-view-table .league-standings-c-view-manager-cell .league-standings-bento-team-name {
  flex: 0 1 auto;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.league-standings-c-view-table .league-standings-c-view-manager-cell .league-standings-bento-chip-badge {
  flex-shrink: 0;
}

/* Chips subpage: Manager + WC2, TC2, BB2, FH2 (second-half chip usage); same bento table styling */
.league-standings-chips-view-wrap {
  width: 100%;
  min-width: 0;
}
/* Keep chips table as a proper table so columns don't collapse into one (no display:flex on td) */
.league-standings-page .league-standings-bento-table.league-standings-chips-table {
  display: table;
  table-layout: fixed;
  min-width: 320px;
}
.league-standings-page .league-standings-bento-table.league-standings-chips-table th.league-standings-chips-th-manager,
.league-standings-page .league-standings-bento-table.league-standings-chips-table td.league-standings-chips-td-manager {
  padding-left: 12px;
}
.league-standings-page .league-standings-bento-table.league-standings-chips-table th.league-standings-chips-th-chip {
  text-align: center;
  font-weight: 600;
  font-size: 10px;
  letter-spacing: 0.5px;
  color: var(--text-secondary);
  text-transform: uppercase;
}
.league-standings-page .league-standings-bento-table.league-standings-chips-table td.league-standings-chips-td-chip {
  text-align: center;
  vertical-align: middle;
  min-height: 36px;
}
.league-standings-chips-badge-unplayed {
  color: var(--text-tertiary, rgba(128, 128, 128, 0.5));
  font-size: 11px;
  font-weight: 400;
}
.league-standings-chips-table .league-standings-chips-badge-played {
  display: inline-block;
  min-width: 24px;
}
.league-standings-chips-loading {
  text-align: center;
  padding: 16px;
  color: var(--text-secondary);
  font-size: 12px;
}

/* League transfers table (when transfers view toggle is on) — stacked list like BentoCard; no horizontal scroll, fit container */
.league-transfers-table-wrap {
  width: 100%;
  min-width: 0;
  overflow-x: hidden;
  background: var(--bg-primary);
}

.league-transfers-table {
  table-layout: fixed;
  width: 100%;
  max-width: 100%;
  min-width: 0;
  border-collapse: collapse;
  font-size: 10px;
  line-height: 1.2;
}

.league-transfers-table thead {
  position: sticky;
  top: 0;
  z-index: 1;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-color);
}

.league-transfers-table thead tr {
  height: 44px;
  min-height: 44px;
}

.league-transfers-table th {
  padding: 6px 8px;
  height: 44px;
  min-height: 44px;
  text-align: left;
  font-weight: 600;
  font-size: 10px;
  letter-spacing: 0.5px;
  color: var(--text-secondary);
  text-transform: uppercase;
  white-space: nowrap;
  vertical-align: middle;
  line-height: 1.2;
  box-sizing: border-box;
}

/* Transfer view: manager + transfers only (no rank) */
.league-transfers-table-cols .league-transfers-col-manager { width: 40%; }
.league-transfers-table-cols .league-transfers-col-transfers { width: 60%; }

/* First-column treatment (schedule-style): manager; slight indent for header and names */
.league-transfers-table .league-transfers-th-manager {
  min-width: 0;
  position: sticky;
  left: 0;
  z-index: 2;
  background: var(--bg-secondary);
  border-right: 1px solid var(--border-color);
  padding-left: 14px;
}

.league-transfers-table .league-transfers-th-transfers {
  min-width: 0;
}

/* Each row has bottom border including last, so the table has a clear wrapped bottom. */
.league-transfers-table tbody tr {
  border-bottom: 1px solid var(--border-color);
  min-height: 36px;
}

/* Fixed 36px base row to match non-transfer view; transfers cell can grow for multi-line content */
/* Fixed 36px base row; first column (manager) gets schedule-style bg in separate rule */
.league-transfers-table .league-transfers-row td:not(.league-transfers-cell-manager) {
  padding: 6px 8px;
  vertical-align: top;
  background: var(--bg-primary);
  min-height: 36px;
  height: 36px;
  box-sizing: border-box;
  font-size: 10px;
  line-height: 1.2;
}
.league-transfers-table .league-transfers-row td.league-transfers-cell-manager {
  padding: 6px 8px 6px 12px;
  vertical-align: top;
  min-height: 36px;
  height: 36px;
  box-sizing: border-box;
  font-size: 10px;
  line-height: 1.2;
}

/* When 0 or 1 transfer, middle-align all cell content (rank, rank change, manager, in/out, points delta) */
.league-transfers-table .league-transfers-row--single-or-none td {
  vertical-align: middle;
}

.league-transfers-table .league-transfers-cell-transfers {
  vertical-align: top;
  min-height: 36px;
  height: auto;
  box-sizing: border-box;
}

.league-transfers-table .league-transfers-row--single-or-none .league-transfers-cell-transfers {
  vertical-align: middle;
}

.league-transfers-table .league-transfers-row--single-or-none .league-transfers-cell-manager {
  vertical-align: middle;
}

/* Visually demote only the transfers cell when manager made no transfers; manager name and fill stay normal */
.league-transfers-table .league-transfers-row--no-transfers .league-transfers-cell-transfers {
  opacity: 0.5;
  color: var(--text-secondary);
  background: color-mix(in srgb, var(--text-secondary) 6%, var(--bg-primary));
  font-weight: 400;
}

/* No-transfers row for current user: same demotion on transfers cell only */
.league-transfers-table .league-transfers-row--no-transfers.league-standings-bento-row-you .league-transfers-cell-transfers {
  background: color-mix(in srgb, var(--text-secondary) 6%, var(--bg-primary));
}

.league-transfers-cell-manager {
  position: sticky;
  left: 0;
  background: inherit;
  z-index: 1;
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 0;
  max-width: 100%;
  overflow: hidden;
}

/* Transfer view: stretch manager cell; first-column treatment (schedule-style) */
.league-transfers-table .league-transfers-cell-manager {
  display: table-cell;
  vertical-align: top;
  overflow: hidden;
  background: var(--bg-secondary);
  border-right: 1px solid var(--border-color);
}

.league-transfers-table .league-transfers-cell-manager-inner {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 4px;
}

.league-transfers-table .league-transfers-cell-manager-name-line {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  min-width: 0;
}

.league-transfers-table .league-transfers-cell-manager-inner .league-standings-bento-team-name {
  display: inline;
  overflow: hidden;
  text-overflow: ellipsis;
}

.league-transfers-table .league-transfers-cell-manager .league-standings-bento-team-name {
  display: block;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}


.league-transfers-cell-transfers {
  min-width: 0;
  max-width: 100%;
}

.league-transfers-list-scroll {
  min-height: 20px;
  overflow-x: hidden;
}

.league-transfers-cell-transfers .bento-card-transfers-list {
  gap: 2px;
}

/* Match standings text scale: 10px in transfer view (BentoCard uses 11px by default) */
.league-transfers-table .bento-card-transfer-item {
  font-size: 10px;
  line-height: 1.2;
  padding: 1px 0;
  min-width: 0;
  gap: 4px;
}

/* Align first transfer line with manager name (no extra top padding on first item) */
.league-transfers-table .bento-card-transfers-list .bento-card-transfer-item:first-child {
  padding-top: 0;
}

/* Truncate long transfer in/out names so content fits container width */
.league-transfers-table .bento-card-transfer-out,
.league-transfers-table .bento-card-transfer-in {
  min-width: 0;
  max-width: 5em;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Individual transfer deltas: text-only green/red, no badge fill (only net badge is filled) */
.league-transfers-table .bento-card-transfer-delta {
  font-size: 9px;
  margin-left: auto;
  padding: 0;
  min-width: 0;
  background: transparent;
  border-radius: 0;
}

.league-transfers-table .bento-card-transfer-delta.positive {
  color: var(--accent-green, #10b981);
  background: transparent;
}

.league-transfers-table .bento-card-transfer-delta.negative {
  color: var(--accent-red, #ef4444);
  background: transparent;
}

.league-transfers-table .bento-card-transfer-delta.neutral {
  color: var(--text-secondary);
  background: transparent;
}

html[data-theme="dark"] .league-transfers-table .bento-card-transfer-delta.positive {
  color: var(--accent-green, #059669);
  background: transparent;
}

html[data-theme="dark"] .league-transfers-table .bento-card-transfer-delta.negative {
  color: var(--accent-red, #dc2626);
  background: transparent;
}

html[data-theme="dark"] .league-transfers-table .bento-card-transfer-delta.neutral {
  color: var(--text-secondary);
  background: transparent;
}

/* Net total row when manager has >1 transfer */
.league-transfers-net-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 6px;
  padding-top: 4px;
  border-top: 1px solid var(--border-color);
  min-height: 20px;
}

.league-transfers-net-label {
  font-size: 10px;
  font-weight: 600;
  color: var(--text-secondary);
  margin-right: auto;
}

.league-transfers-net-badge {
  font-size: 9px;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 4px;
  min-width: 1.5em;
  text-align: center;
  border: 2px solid transparent;
}

.league-transfers-net-badge--positive {
  color: #fff;
  background: var(--accent-green, #10b981);
  border-color: #047857;
}

.league-transfers-net-badge--negative {
  color: #fff;
  background: var(--accent-red, #ef4444);
  border-color: #b91c1c;
}

.league-transfers-net-badge--neutral {
  color: var(--text-secondary);
  background: var(--bg-tertiary, #e5e7eb);
  border-color: var(--text-tertiary, rgba(128, 128, 128, 0.5));
}

html[data-theme="dark"] .league-transfers-net-badge--positive {
  background: var(--accent-green, #059669);
  border-color: #065f46;
}

html[data-theme="dark"] .league-transfers-net-badge--negative {
  background: var(--accent-red, #dc2626);
  border-color: #991b1b;
}

html[data-theme="dark"] .league-transfers-net-badge--neutral {
  background: var(--bg-tertiary, #374151);
  border-color: #4b5563;
}

.league-transfers-empty {
  color: var(--text-secondary);
  font-size: 10px;
}

.league-transfers-loading {
  text-align: center;
  color: var(--text-secondary);
  padding: 24px !important;
}

/* Table: fixed layout with colgroup widths (12% rank, 24% manager, 16% each total/gw/left/live); match transfer view text/header scale */
.league-standings-page .league-standings-bento-table {
  display: table;
  table-layout: fixed;
  width: 100%;
  min-width: 420px;
  border-collapse: collapse;
  font-size: 10px;
  line-height: 1.2;
}
.league-standings-page .league-standings-bento-table thead {
  position: sticky;
  top: 0;
  z-index: 1;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-color);
}
.league-standings-page .league-standings-bento-table thead tr {
  height: 44px;
  min-height: 44px;
}
.league-standings-page .league-standings-bento-table th {
  background: var(--bg-secondary);
  height: 44px;
  min-height: 44px;
  padding: 6px 8px;
  font-size: 10px;
  letter-spacing: 0.5px;
  line-height: 1.2;
  box-sizing: border-box;
}
.league-standings-page .league-standings-bento-table td {
  border-bottom: none; /* only use tr border so one flush line per row; overrides shared BentoCard rule */
  box-sizing: border-box;
  font-size: 10px;
  line-height: 1.2;
  overflow: hidden;
  vertical-align: middle;
  background: var(--bg-primary);
}

/* First-column treatment (schedule-style): rank and manager columns; no line between rank and manager */
.league-standings-page .league-standings-bento-table th.league-standings-bento-rank {
  position: sticky;
  left: 0;
  z-index: 2;
}
.league-standings-page .league-standings-bento-table th.league-standings-bento-team {
  border-right: 1px solid var(--border-color);
}
.league-standings-page .league-standings-bento-table td.league-standings-bento-rank {
  background: var(--bg-secondary);
  position: sticky;
  left: 0;
  z-index: 1;
}
.league-standings-page .league-standings-bento-table td.league-standings-bento-team {
  background: var(--bg-secondary);
  border-right: 1px solid var(--border-color);
}
/* Single border per row so the line is flush across all columns (avoids manager flex cell misalignment).
   Last row keeps border to wrap the bottom of the table (same as transfers view). */
.league-standings-page .league-standings-bento-table tbody tr {
  border-bottom: 1px solid var(--border-color);
  min-height: 36px; /* match height when rank change badge is present so all rows are consistent */
}

.league-standings-page .league-standings-bento-table tbody td {
  min-height: 36px;
  height: 36px;
  box-sizing: border-box;
  font-size: 10px;
  line-height: 1.2;
}

/* Column widths set via colgroup (12% rank, 24% manager, 16% each total/gw/left/live) */
.league-standings-page .league-standings-bento-table .league-standings-bento-rank,
.league-standings-page .league-standings-bento-table .league-standings-bento-team,
.league-standings-page .league-standings-bento-table .league-standings-bento-total,
.league-standings-page .league-standings-bento-table .league-standings-bento-gw,
.league-standings-page .league-standings-bento-table .league-standings-bento-left-to-play,
.league-standings-page .league-standings-bento-table .league-standings-bento-in-play {
  padding: 6px 8px;
  box-sizing: border-box;
}
.league-standings-page .league-standings-bento-table .league-standings-bento-rank {
  padding-left: 10px;
  white-space: nowrap;
}
.league-standings-page .league-standings-bento-table .league-standings-bento-team {
  overflow: hidden;
}
.league-standings-page .league-standings-bento-table .league-standings-bento-total,
.league-standings-page .league-standings-bento-table .league-standings-bento-gw,
.league-standings-page .league-standings-bento-table .league-standings-bento-left-to-play,
.league-standings-page .league-standings-bento-table .league-standings-bento-in-play {
  text-align: center;
  white-space: nowrap;
}

/* GW column: tapering fill for top third of league by gameweek (league page only); gradient tiers 1–5 */
.league-standings-page .league-standings-bento-table td.league-standings-bento-gw.league-standings-gw-top-1 {
  background: color-mix(in srgb, var(--accent-green, #10b981) 22%, var(--bg-primary));
  font-weight: 700;
}
.league-standings-page .league-standings-bento-table td.league-standings-bento-gw.league-standings-gw-top-2 {
  background: color-mix(in srgb, var(--accent-green, #10b981) 14%, var(--bg-primary));
  font-weight: 600;
}
.league-standings-page .league-standings-bento-table td.league-standings-bento-gw.league-standings-gw-top-3 {
  background: color-mix(in srgb, var(--accent-green, #10b981) 9%, var(--bg-primary));
  font-weight: 600;
}
.league-standings-page .league-standings-bento-table td.league-standings-bento-gw.league-standings-gw-top-4 {
  background: color-mix(in srgb, var(--accent-green, #10b981) 5%, var(--bg-primary));
}
.league-standings-page .league-standings-bento-table td.league-standings-bento-gw.league-standings-gw-top-5 {
  background: color-mix(in srgb, var(--accent-green, #10b981) 3%, var(--bg-primary));
}

/* Total column: same tapering fill for top third of league by total points (league page only); gradient tiers 1–5 */
.league-standings-page .league-standings-bento-table td.league-standings-bento-total.league-standings-total-top-1 {
  background: color-mix(in srgb, var(--accent-green, #10b981) 22%, var(--bg-primary));
  font-weight: 700;
}
.league-standings-page .league-standings-bento-table td.league-standings-bento-total.league-standings-total-top-2 {
  background: color-mix(in srgb, var(--accent-green, #10b981) 14%, var(--bg-primary));
  font-weight: 600;
}
.league-standings-page .league-standings-bento-table td.league-standings-bento-total.league-standings-total-top-3 {
  background: color-mix(in srgb, var(--accent-green, #10b981) 9%, var(--bg-primary));
  font-weight: 600;
}
.league-standings-page .league-standings-bento-table td.league-standings-bento-total.league-standings-total-top-4 {
  background: color-mix(in srgb, var(--accent-green, #10b981) 5%, var(--bg-primary));
}
.league-standings-page .league-standings-bento-table td.league-standings-bento-total.league-standings-total-top-5 {
  background: color-mix(in srgb, var(--accent-green, #10b981) 3%, var(--bg-primary));
}

/* Rank cell inner: flex so rank value + arrow/badge stay on one line, no overlap */
.league-standings-page .league-standings-bento-table .league-standings-bento-rank .league-standings-bento-rank-inner {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  max-width: 100%;
  min-width: 0;
  white-space: nowrap;
}
.league-standings-page .league-standings-bento-table .league-standings-bento-rank-value {
  font-size: 6px;
  font-weight: 300;
}
.league-standings-page .league-standings-bento-table .league-standings-bento-rank .league-standings-bento-change-badge {
  flex-shrink: 0;
}

/* Rank change badge: subtle green/red fill */
.league-standings-page .league-standings-bento-change-badge.positive {
  background: rgba(16, 185, 129, 0.18);
  color: var(--accent-green, #10b981);
  padding: 2px 5px;
  border-radius: 4px;
}
.league-standings-page .league-standings-bento-change-badge.negative {
  background: rgba(239, 68, 68, 0.18);
  color: var(--accent-red, #ef4444);
  padding: 2px 5px;
  border-radius: 4px;
}

/* Manager cell (td only): truncate long names; content stays inside column (no overrun).
   Use flex (not inline-flex) so the cell stays block-level and row borders align across all columns.
   Scoped to td so the manager header (th) keeps var(--bg-secondary) like other header cells. */
.league-standings-page .league-standings-bento-table td.league-standings-bento-team {
  display: flex;
  align-items: center;
  gap: 6px;
  max-width: 100%;
  min-width: 0; /* allow inner name to shrink for ellipsis */
  overflow: hidden;
  border-right: 1px solid var(--border-color);
}
.league-standings-page .league-standings-bento-team .league-standings-bento-team-name {
  flex: 0 1 auto;
  min-width: 0;
  font-weight: 600;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.league-standings-bento-team-name {
  font-weight: 600;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.league-standings-bento-chip-badge {
  flex-shrink: 0;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 600;
  color: #fff;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

/* Configured owner (you) indicator — same size and style as chip badge when activated; blue bg, white text */
.league-standings-bento-you-badge {
  flex-shrink: 0;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 600;
  text-transform: none;
  letter-spacing: 0.02em;
  color: #fff;
  background: var(--accent-blue, #3b82f6);
}

/* Header: column widths from colgroup (match transfer view header scale) */
.league-standings-page .league-standings-bento-table th {
  vertical-align: middle;
  font-size: 10px;
  line-height: 1.2;
  white-space: nowrap;
  letter-spacing: 0.5px;
  padding: 6px 8px;
  box-sizing: border-box;
  overflow: hidden;
}
.league-standings-page .league-standings-bento-table th.league-standings-bento-rank {
  text-align: left;
  padding-left: 10px;
}
.league-standings-page .league-standings-bento-table th.league-standings-bento-team {
  text-align: left;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  background: var(--bg-secondary);
}
.league-standings-page .league-standings-bento-table th.league-standings-bento-total,
.league-standings-page .league-standings-bento-table th.league-standings-bento-gw,
.league-standings-page .league-standings-bento-table th.league-standings-bento-left-to-play,
.league-standings-page .league-standings-bento-table th.league-standings-bento-in-play {
  text-align: center;
}

/* Sortable column headers: button reset, tap target, triangle indicator */
.league-standings-page .league-standings-sort-header {
  display: inline-flex;
  align-items: center;
  gap: 2px;
  width: 100%;
  padding: 0;
  border: none;
  background: none;
  font: inherit;
  color: inherit;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  cursor: pointer;
  text-align: inherit;
  -webkit-tap-highlight-color: transparent;
}
@media (hover: hover) {
  .league-standings-page .league-standings-sort-header:hover {
    color: var(--text-primary);
  }
}
.league-standings-page .league-standings-sort-header:focus-visible {
  outline: 2px solid var(--border-color, #ccc);
  outline-offset: 2px;
}
/* Reserve space for sort triangle so column width doesn't jump when sorting */
.league-standings-page .league-standings-sort-triangle-slot {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 6px;
  width: 6px;
  flex-shrink: 0;
}
.league-standings-page .league-standings-sort-triangle {
  display: inline-flex;
  flex-shrink: 0;
  color: var(--text-secondary);
}
.league-standings-page .league-standings-sort-header:focus-visible .league-standings-sort-triangle {
  color: var(--text-primary);
}
@media (hover: hover) {
  .league-standings-page .league-standings-sort-header:hover .league-standings-sort-triangle {
    color: var(--text-primary);
  }
}
.league-standings-page .league-standings-bento-table th.league-standings-bento-total .league-standings-sort-header,
.league-standings-page .league-standings-bento-table th.league-standings-bento-gw .league-standings-sort-header,
.league-standings-page .league-standings-bento-table th.league-standings-bento-left-to-play .league-standings-sort-header,
.league-standings-page .league-standings-bento-table th.league-standings-bento-in-play .league-standings-sort-header {
  justify-content: center;
}

/* Full-cell tap area for sort: whole header cell tappable, not just the label (rank th already has position: sticky) */
.league-standings-page .league-standings-bento-table th.league-standings-bento-team,
.league-standings-page .league-standings-bento-table th.league-standings-bento-total,
.league-standings-page .league-standings-bento-table th.league-standings-bento-gw,
.league-standings-page .league-standings-bento-table th.league-standings-bento-left-to-play,
.league-standings-page .league-standings-bento-table th.league-standings-bento-in-play,
.league-standings-page .league-standings-bento-table th.captain-standings-bento-captain,
.league-standings-page .league-standings-bento-table th.captain-standings-bento-vice {
  position: relative;
}
.league-standings-page .league-standings-bento-table th.league-standings-bento-rank .league-standings-sort-header,
.league-standings-page .league-standings-bento-table th.league-standings-bento-team .league-standings-sort-header,
.league-standings-page .league-standings-bento-table th.league-standings-bento-total .league-standings-sort-header,
.league-standings-page .league-standings-bento-table th.league-standings-bento-gw .league-standings-sort-header,
.league-standings-page .league-standings-bento-table th.league-standings-bento-left-to-play .league-standings-sort-header,
.league-standings-page .league-standings-bento-table th.league-standings-bento-in-play .league-standings-sort-header,
.league-standings-page .league-standings-bento-table th.captain-standings-bento-captain .league-standings-sort-header,
.league-standings-page .league-standings-bento-table th.captain-standings-bento-vice .league-standings-sort-header {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  padding: 4px 6px;
  box-sizing: border-box;
}
.league-standings-page .league-standings-bento-table th.league-standings-bento-rank .league-standings-sort-header {
  justify-content: flex-start;
}
.league-standings-page .league-standings-bento-table th.league-standings-bento-team .league-standings-sort-header {
  justify-content: flex-start;
}
.league-standings-page .league-standings-bento-table th.league-standings-bento-total .league-standings-sort-header,
.league-standings-page .league-standings-bento-table th.league-standings-bento-gw .league-standings-sort-header,
.league-standings-page .league-standings-bento-table th.league-standings-bento-left-to-play .league-standings-sort-header,
.league-standings-page .league-standings-bento-table th.league-standings-bento-in-play .league-standings-sort-header {
  justify-content: center;
}
.league-standings-page .league-standings-bento-table th.captain-standings-bento-captain .league-standings-sort-header,
.league-standings-page .league-standings-bento-table th.captain-standings-bento-vice .league-standings-sort-header {
  justify-content: center;
}

/* Transfers table: full-cell tap for Manager sort header */
.league-standings-page .league-transfers-table th.league-transfers-th-manager {
  position: relative;
}
.league-standings-page .league-transfers-table th.league-transfers-th-manager .league-standings-sort-header {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  padding: 4px 6px;
  box-sizing: border-box;
}

.league-standings-bento-left-to-play,
.league-standings-bento-in-play {
  text-align: center;
  vertical-align: middle;
  font-variant-numeric: tabular-nums;
}

/* Mobile: fit table in viewport (no horizontal scroll); narrower manager column, truncate name */
@media (max-width: 640px) {
  .league-standings-page .league-standings-bento-table {
    min-width: 0;
  }
  .league-standings-page .league-standings-bento-table .league-standings-bento-col-manager {
    width: 26%;
  }
  .league-standings-page .league-standings-bento-table .league-standings-bento-rank,
  .league-standings-page .league-standings-bento-table .league-standings-bento-team,
  .league-standings-page .league-standings-bento-table .league-standings-bento-total,
  .league-standings-page .league-standings-bento-table .league-standings-bento-gw,
  .league-standings-page .league-standings-bento-table .league-standings-bento-left-to-play,
  .league-standings-page .league-standings-bento-table .league-standings-bento-in-play {
    padding: 4px 6px;
  }
  .league-standings-page .league-standings-bento-table th {
    padding: 4px 6px;
  }
  .league-standings-page .league-standings-bento-table .league-standings-bento-rank {
    padding-left: 6px;
  }
  .league-standings-page .league-standings-bento-table td.league-standings-bento-team .league-standings-bento-team-name {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
}

/* Clickable manager row: same UI as GW Points popup on click */
.league-standings-page .league-standings-bento-table tbody tr.league-standings-bento-row {
  cursor: pointer;
}
.league-standings-page .league-standings-bento-table tbody tr.league-standings-bento-row-selected td {
  background: var(--bg-secondary);
}

/* Ownership search: highlight managers who own selected player(s) — same accent as nav .tracking-mode-button.active */
.league-standings-page .league-standings-bento-table tbody tr.league-standings-bento-row--owns-selected td {
  background: color-mix(in srgb, var(--accent-blue, #3b82f6) 10%, var(--bg-primary));
}
.league-standings-page .league-standings-bento-table tbody tr.league-standings-bento-row--owns-selected td.league-standings-bento-team {
  background: color-mix(in srgb, var(--accent-blue, #3b82f6) 10%, var(--bg-primary));
}
.league-standings-page .league-standings-bento-table tbody tr.league-standings-bento-row--owns-selected td.league-standings-bento-rank {
  border-left: 3px solid var(--accent-blue, #3b82f6);
  box-shadow: 0 0 6px rgba(59, 130, 246, 0.25);
}

/* Ownership search: demote rows that don't own selected player(s) — show all, grey out non-owners */
.league-standings-page .league-standings-bento-table tbody tr.league-standings-bento-row--demoted td {
  background: var(--bg-secondary);
  opacity: 0.5;
  color: var(--text-secondary);
}
@media (hover: hover) {
  .league-standings-page .league-standings-bento-table tbody tr.league-standings-bento-row--demoted:hover td {
    opacity: 0.75;
  }
}

/* Manager detail modal: same layout and UI as GW Points expanded card */
.manager-detail-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
  backdrop-filter: blur(2px);
  animation: managerDetailModalFadeIn var(--motion-duration) var(--motion-ease);
}
@keyframes managerDetailModalFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
.manager-detail-modal-content {
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  width: 100%;
  max-width: min(90vw, 900px);
  min-height: min(70vh, 500px);
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
  animation: managerDetailModalSlideIn var(--motion-duration) var(--motion-ease);
}
@keyframes managerDetailModalSlideIn {
  from {
    opacity: 0;
    transform: scale(0.96) translateY(-8px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}
.manager-detail-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px 16px;
  border-bottom: 1px solid var(--border-color);
  flex-shrink: 0;
}
.manager-detail-modal-header-title-wrap {
  min-width: 0;
}
.manager-detail-modal-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
  letter-spacing: 0.2px;
}
.manager-detail-modal-subtitle {
  font-size: 13px;
  font-weight: 400;
  color: var(--text-secondary);
  margin: 4px 0 0;
  line-height: 1.2;
}
.manager-detail-modal-header-actions {
  position: relative;
  display: flex;
  align-items: center;
  gap: 8px;
}
.manager-detail-modal-legend-icon {
  flex-shrink: 0;
  width: 22px;
  height: 22px;
}
.manager-detail-modal-legend-icon .bento-card-expand-icon-svg {
  width: 12px;
  height: 12px;
}
.manager-detail-modal-legend-popup {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 8px;
}
.manager-detail-modal-close {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: color 0.2s, background 0.2s;
}
.manager-detail-modal-close svg {
  width: 20px;
  height: 20px;
}
@media (hover: hover) {
  .manager-detail-modal-close:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
  }
}
.manager-detail-modal-body {
  padding: 8px 12px 12px;
  overflow: auto;
  display: flex;
  flex-direction: column;
  min-height: 0;
  flex: 1;
}
.manager-detail-modal-body.bento-card-chart {
  margin-top: 0;
}

/* Chart area: same height as home GW points bento; internal scroll like bento */
.manager-detail-compare-hint {
  margin-bottom: 8px;
  flex-shrink: 0;
}

.manager-detail-modal-chart-wrap {
  flex: 0 0 auto;
  width: 100%;
  min-width: 0;
  height: 452px;
  min-height: 452px;
  max-height: 452px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
@media (max-height: 600px) {
  .manager-detail-modal-chart-wrap {
    height: 360px;
    min-height: 360px;
    max-height: 360px;
  }
}

.manager-detail-transfers-section {
  flex-shrink: 0;
  width: 100%;
  min-width: 0;
  margin-top: 12px;
}

/* Bento-style container for Transfers made (matches home bento cards) */
.manager-detail-transfers-bento {
  width: 100%;
  min-width: 0;
  padding: 12px 14px;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  /* Override home grid bento styles when used inside modal */
  height: auto;
  min-height: 0;
  grid-column: unset;
  grid-row: unset;
  opacity: 1;
  animation: none;
}

.manager-detail-transfers-section .manager-detail-transfers-label,
.manager-detail-transfers-section .bento-card-label {
  display: block;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--text-secondary);
  margin-bottom: 6px;
}

.manager-detail-transfers-summary {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 6px;
}

.manager-detail-transfers-summary-text {
  flex-shrink: 0;
}

.manager-detail-transfers-chip-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  flex-shrink: 0;
}

.manager-detail-transfers-list {
  display: flex;
  flex-direction: column;
  gap: 2px;
  width: 100%;
  min-width: 0;
}

.manager-detail-transfers-list .bento-card-transfer-item {
  padding: 2px 0;
  width: 100%;
  min-width: 0;
  box-sizing: border-box;
}

/* Individual transfer deltas in manager modal: text-only green/red, no badge fill */
.manager-detail-transfers-list .bento-card-transfer-delta {
  padding: 0;
  min-width: 0;
  background: transparent;
  border-radius: 0;
}

.manager-detail-transfers-list .bento-card-transfer-delta.positive {
  color: var(--accent-green, #10b981);
  background: transparent;
}

.manager-detail-transfers-list .bento-card-transfer-delta.negative {
  color: var(--accent-red, #ef4444);
  background: transparent;
}

.manager-detail-transfers-list .bento-card-transfer-delta.neutral {
  color: var(--text-secondary);
  background: transparent;
}

html[data-theme="dark"] .manager-detail-transfers-list .bento-card-transfer-delta.positive {
  color: var(--accent-green, #059669);
  background: transparent;
}

html[data-theme="dark"] .manager-detail-transfers-list .bento-card-transfer-delta.negative {
  color: var(--accent-red, #dc2626);
  background: transparent;
}

html[data-theme="dark"] .manager-detail-transfers-list .bento-card-transfer-delta.neutral {
  color: var(--text-secondary);
  background: transparent;
}

/* Legend: "Name" (green) = Owned by you – match table player name size/weight */
.manager-detail-modal-legend-popup .gw-legend-popup-text--name-green {
  font-size: 11px;
  font-weight: 600;
  color: var(--accent-green, #10b981);
  text-shadow: 0 0 12px color-mix(in srgb, var(--accent-green, #10b981) 50%, transparent);
}

/* Player detail modal (same layout as manager modal, stacked above when open) */
.player-detail-modal-overlay {
  /* Top-level stacking so it appears above dashboard header (z 100) and bottom nav (z 99) */
  z-index: 1100;
}

/* Mobile: keep overlay and content between top header and bottom nav */
@media (max-width: 768px) {
  .player-detail-modal-overlay {
    top: var(--dashboard-header-height, 0);
    bottom: var(--dashboard-nav-height, 0);
    left: 0;
    right: 0;
    height: auto;
    padding: 12px;
  }
  .player-detail-modal-overlay .player-detail-modal-content {
    max-height: 100%;
  }
}

.player-detail-modal-content {
  position: relative;
  max-width: min(90vw, 480px);
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

/* Backdrop when filter popup is open: dim everything in the modal below the popup */
.player-detail-filter-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  z-index: 1;
  border-radius: 12px;
}
.player-detail-filter-popup-portal {
  position: relative;
  z-index: 2;
}
.player-detail-modal-body {
  display: flex;
  flex-direction: column;
  gap: 12px;
  overflow: auto;
  flex: 1;
  min-height: 0;
  -webkit-overflow-scrolling: touch;
}
/* Player detail header: one row = badge (left) + name + position pill (right); no team abbreviation */
.player-detail-modal-overlay .manager-detail-modal-header-title-wrap.player-detail-modal-header-row {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}
.player-detail-modal-overlay .player-detail-modal-badge {
  width: 28px;
  height: 28px;
  flex-shrink: 0;
  object-fit: contain;
}
.player-detail-modal-overlay .player-detail-modal-header-row .manager-detail-modal-title {
  flex: 1;
  min-width: 0;
  margin: 0;
}
.player-detail-modal-position-pill {
  flex-shrink: 0;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 999px;
  padding: 4px 10px;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}
/* Player detail bentos: scope under modal body so we beat .bento-card (HomePage.css) fixed height; size to content, body scrolls */
.player-detail-modal-body .player-detail-details-bento,
.player-detail-modal-body .player-detail-chart-bento {
  width: 100%;
  min-width: 0;
  padding: 12px 14px;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  overflow: visible;
  flex-shrink: 0;
  height: auto;
  min-height: min-content;
  max-height: none;
  grid-column: unset;
  grid-row: unset;
  opacity: 1;
  animation: none;
}
.player-detail-details-bento .bento-card-label,
.player-detail-chart-bento .bento-card-label {
  display: block;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--text-secondary);
  margin-bottom: 6px;
  flex-shrink: 0;
}
.player-detail-details-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px 16px;
  flex-shrink: 0;
  min-height: min-content;
}
.player-detail-detail-row {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}
.player-detail-detail-label {
  font-size: 11px;
  color: var(--text-secondary);
}
.player-detail-detail-value {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

/* Chart bento header: label left, eye (stat filter) button right */
.player-detail-chart-bento-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  flex-shrink: 0;
  position: relative;
}
.player-detail-chart-bento-label {
  margin-bottom: 0;
}
.player-detail-chart-bento-label .bento-card-label-suffix {
  font-size: 10px;
  font-weight: 400;
  opacity: 0.65;
  text-transform: none;
  letter-spacing: 0.3px;
  margin-left: 6px;
  color: var(--text-secondary);
}
.player-detail-chart-bento-average {
  font-size: 12px;
  font-weight: 400;
  color: var(--text-secondary);
  opacity: 0.85;
  margin-top: 2px;
  margin-bottom: 6px;
}
.player-detail-chart-bento-actions {
  position: relative;
  flex-shrink: 0;
}
.player-detail-chart-stat-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  padding: 0;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-secondary);
  color: var(--text-secondary);
  cursor: pointer;
  transition: color 0.2s, background 0.2s, border-color 0.2s;
}
@media (hover: hover) {
  .player-detail-chart-stat-btn:hover {
    background: var(--bg-card);
    border-color: var(--text-secondary);
    color: var(--text-primary);
  }
}
/* Player detail chart stat popup: filters (stat + range) sized to content */
.player-detail-stat-popup.stats-filter-overlay-panel {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 100;
  width: max-content;
  min-width: 260px;
  max-width: min(360px, calc(100vw - 24px));
  height: max-content;
  max-height: min(calc(100vh - 120px), 420px);
  min-height: 0;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.14);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.player-detail-stat-popup .stats-filter-overlay-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  border-bottom: 1px solid var(--border-color);
  flex-shrink: 0;
}
.player-detail-stat-popup .stats-filter-overlay-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
}
.player-detail-stat-popup .stats-filter-overlay-header-actions {
  display: flex;
  align-items: center;
  gap: 4px;
}
.player-detail-stat-popup .stats-filter-overlay-close {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 6px;
  border: none;
  background: none;
  color: var(--text-secondary);
  cursor: pointer;
  border-radius: 6px;
  -webkit-tap-highlight-color: transparent;
}
@media (hover: hover) {
  .player-detail-stat-popup .stats-filter-overlay-close:hover {
    color: var(--text-primary);
    background: var(--bg-secondary);
  }
}
.player-detail-stat-popup .stats-filter-overlay-body {
  flex: 0 1 auto;
  min-height: 0;
  padding: 14px 16px;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}
.player-detail-stat-popup .stats-filter-section {
  min-width: 0;
  margin-bottom: 16px;
}
.player-detail-stat-popup .stats-filter-section:last-child {
  margin-bottom: 0;
}
.player-detail-stat-popup .stats-filter-section-title {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--text-secondary);
  margin-bottom: 8px;
}
.player-detail-stat-popup .stats-filter-buttons {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px;
}
.player-detail-stat-popup .stats-filter-option-btn {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 5px;
  cursor: pointer;
  transition: color 0.15s, border-color 0.15s, background 0.15s;
}
@media (hover: hover) {
  .player-detail-stat-popup .stats-filter-option-btn:hover {
    color: var(--text-primary);
    border-color: var(--text-secondary);
  }
}
.player-detail-stat-popup .stats-filter-option-btn--active {
  color: var(--accent-blue, #3b82f6);
  border-color: var(--accent-blue, #3b82f6);
  background: color-mix(in srgb, var(--accent-blue, #3b82f6) 10%, var(--bg-secondary));
}
.player-detail-stat-popup .stats-filter-overlay-footer {
  flex-shrink: 0;
  padding: 8px 16px 6px;
  border-top: 1px solid var(--border-color);
  background: var(--bg-card);
}
.player-detail-stat-popup .stats-filter-overlay-done {
  display: block;
  width: 100%;
  padding: 6px 14px;
  font-size: 13px;
  font-weight: 600;
  color: #fff;
  background: var(--accent-blue, #3b82f6);
  border: 1px solid var(--accent-blue, #3b82f6);
  border-radius: 6px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
}
@media (hover: hover) {
  .player-detail-stat-popup .stats-filter-overlay-done:hover {
    background: color-mix(in srgb, var(--accent-blue, #3b82f6) 85%, #000);
    border-color: color-mix(in srgb, var(--accent-blue, #3b82f6) 85%, #000);
  }
}
.player-detail-stat-popup .stats-filter-overlay-done:focus-visible {
  outline: 2px solid var(--focus-ring, #3b82f6);
  outline-offset: 2px;
}

/* Chart bento: height fits chart + gameweek filter; size to content so nothing is cropped, modal body scrolls */
.player-detail-chart-wrap {
  width: 100%;
  min-height: min-content;
  flex-shrink: 0;
  flex: 0 0 auto;
  display: flex;
  flex-direction: column;
  overflow: visible;
}
/* Chart wrapper must not shrink so the bar chart and filters are fully visible; modal body scrolls instead */
.player-detail-chart-wrap .player-gw-chart-wrapper {
  flex: 0 0 auto;
  flex-shrink: 0;
  min-height: min-content;
}

/* Schedule bento inside player modal: beat .bento-card fixed height, size to content */
.player-detail-modal-body .schedule-bento,
.player-detail-modal-body .schedule-opponent-stats-table {
  height: auto;
  min-height: min-content;
  max-height: none;
  overflow: visible;
  flex-shrink: 0;
}

/* Team detail modal (same layout and styling as player detail modal) */
.team-detail-modal-overlay {
  z-index: 1100;
}
@media (max-width: 768px) {
  .team-detail-modal-overlay {
    top: var(--dashboard-header-height, 0);
    bottom: var(--dashboard-nav-height, 0);
    left: 0;
    right: 0;
    height: auto;
    padding: 12px;
  }
  .team-detail-modal-overlay .team-detail-modal-content {
    max-height: 100%;
  }
}
.team-detail-modal-overlay .manager-detail-modal-header-title-wrap.player-detail-modal-header-row {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}
.team-detail-modal-overlay .player-detail-modal-badge {
  width: 28px;
  height: 28px;
  flex-shrink: 0;
  object-fit: contain;
}
.team-detail-modal-overlay .player-detail-modal-header-row .manager-detail-modal-title {
  flex: 1;
  min-width: 0;
  margin: 0;
}
.team-detail-modal-content {
  position: relative;
  max-width: min(90vw, 480px);
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  min-height: 0;
}
